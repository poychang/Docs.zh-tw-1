---
title: "使用組態檔設定應用程式"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
f1_keywords: AutoGeneratedOrientationPage
helpviewer_keywords:
- security configuration files
- end tags
- configuration files [.NET Framework], application
- machine configuration files
- .NET Framework application configuration, configuration files
- applications [.NET Framework], configuration files
- application configuration files, security
- application configuration files, format
- configuration files [.NET Framework]
- hosts, application
- application configuration files, machine
- ASP.NET, configuring
- configuration files [.NET Framework], security
- application configuration files, about
- application configuration files
- <runtime> element
- start tags
- configuration files [.NET Framework], machine
- configuration files [.NET Framework], format
ms.assetid: 86bd26d3-737e-4484-9782-19b17f34cd1f
caps.latest.revision: "28"
author: mcleblanc
ms.author: markl
manager: markl
ms.workload: dotnet
ms.openlocfilehash: 74b5bce3191b2d40e5b37d64b3d1eee24395ce4c
ms.sourcegitcommit: c3ebb11a66e85a465c9ba2c42592222630b7ff9e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/25/2018
---
# <a name="configuring-apps-by-using-configuration-files"></a>使用組態檔設定應用程式
.NET Framework 透過組態檔賦予開發人員和系統管理員對於應用程式執行方式的控制和彈性。 組態檔是可以按需要變更的 XML 檔。 系統管員能夠控制應用程式可以存取哪些受保護的資源、應用程式將使用之組件的版本為何，以及遠端應用程式和物件要位於何處。 開發人員則可以將設定值置於組態檔，排除每當設定值變更時重新編譯應用程式的需要。 本章節說明可以設定些什麼以及設定應用程式會很有用處的原因。  
  
> [!NOTE]
>  Managed 程式碼可以使用 <xref:System.Configuration> 命名空間中的類別，以讀取 (而非寫入) 組態檔設定。  
  
 本主題描述組態檔的語法，並提供有關組態檔的三種類型資訊：電腦、應用程式和安全性。  
  
## <a name="configuration-file-format"></a>組態檔格式  
 組態檔包含一些項目，為設定組態資訊的邏輯資料結構。 在組態檔內，您要使用標記 (Tag) 來標記項目的開頭和結尾。 例如，`<runtime>` 項目是由 `<runtime>`*child elements*`</runtime>` 所組成。 空白項目會寫成 `<runtime/>` 或 `<runtime></runtime>`。  
  
 就如同所有的 XML 檔，組態檔中的語法要區分大小寫。  
  
 您要使用預先定義的屬性 (項目之開始標記內的名稱/值組) 來指定組態設定。 下列範例會為 `<codeBase>` 項目指定兩個屬性 (`version` 與 `href`)，以指定執行階段可以找到組件的位置 (如需詳細資料，請參閱[指定組件的位置](../../../docs/framework/configure-apps/specify-assembly-location.md))。  
  
```xml  
<codeBase version="2.0.0.0"  
          href="http://www.litwareinc.com/myAssembly.dll"/>  
```  
  
## <a name="machine-configuration-files"></a>電腦組態檔  
 電腦組態檔 Machine.config 包含套用於整個電腦的設定值。 這個檔案位於 %*runtime install path*%\Config 目錄中。 Machine.config 包含全電腦的組件繫結、內建[遠端通道](http://msdn.microsoft.com/library/6e9b60e0-9bc0-47b4-a8ef-3b78585f9a18)和 ASP.NET 的組態設定。  
  
 組態系統首先會在電腦組態檔中尋找 [**\<appSettings>** 項目](~/docs/framework/configure-apps/file-schema/appsettings/index.md)以及開發人員可能定義的其他組態區段。 接著會查看應用程式組態檔。 若要讓電腦組態檔易於管理，最好將這些設定值放在應用程式組態檔中。 然而，將設定值置於電腦組態檔可讓您的系統更容易維護。 例如，如果您有用戶端和伺服器應用程式都使用到的協力廠商元件，將那元件的設定值放在一個地方會比較容易。 在這個情況中，電腦組態檔是設定值的適當位置，所以您在兩個不同檔案中沒有相同的設定值。  
  
> [!NOTE]
>  使用 XCOPY 部署應用程式將不會複製電腦組態檔中的設定值。  
  
 如需 Common Language Runtime 如何使用電腦組態檔執行組件繫結的詳細資訊，請參閱[執行階段如何找出組件](../../../docs/framework/deployment/how-the-runtime-locates-assemblies.md)。  
  
## <a name="application-configuration-files"></a>應用程式組態檔  
 應用程式組態檔包含應用程式特有的設定值。 這個檔案包含通用語言執行平台讀取的組態設定 (例如組件繫結原則、遠端處理物件等) 以及應用程式可以讀取的設定值。  
  
 應用程式組態檔的名稱和位置取決於應用程式的主應用程式 (Host)，可以是下列其中一個：  
  
-   可執行檔裝載的應用程式。  
  
     這些應用程式有兩個組態檔：一個是來源組態檔，開發人員會在開發期間修改這個組態檔，另一個是隨應用程式散發的輸出檔。  
  
     當您使用 Visual Studio 進行開發時，將應用程式的來源組態檔放置在專案目錄中，並將其 [複製到輸出目錄] 屬性設定為 [永遠複製] 或 [有更新時才複製]。 組態檔的名稱為具有 .config 副檔名的應用程式名稱。 例如，稱為 myApp.exe 的應用程式應擁有稱為 myApp.exe.config 的來源組態檔。  
  
     Visual Studio 會自動將來源組態檔複製到編譯的組件所在的目錄中，以建立輸出組態檔，該組態檔會隨應用程式一起部署。 在某些情況下，Visual Studio 可能會修改輸出組態檔；如需詳細資訊，請參閱[重新導向組件版本](../../../docs/framework/configure-apps/redirect-assembly-versions.md)文件的[將應用程式層級的組件版本重新導向](../../../docs/framework/configure-apps/redirect-assembly-versions.md#BKMK_Redirectingassemblyversionsattheapplevel)一節。  
  
-   ASP.NET 裝載的應用程式。  
  
     如需 ASP.NET 組態檔的詳細資訊，請參閱 [ASP.NET 組態設定](http://msdn.microsoft.com/library/116608f3-c03d-4413-9fc7-978703e18b0f)  
  
-   Internet Explorer 裝載的應用程式。  
  
     如果裝載於 Internet Explorer 的應用程式具有組態檔，這個檔案的位置會以下列語法在 `<link>` 標籤中指定：  
  
     \<link rel="*ConfigurationFileName*" href="*location*">  
  
     這個標記中，`location` 為組態檔的 URL。 這會設定應用程式基底。 組態檔必須位在與應用程式相同的網站上。  
  
## <a name="security-configuration-files"></a>安全組態檔  
 安全組態檔包含程式碼群組階層架構和與原則層級相關聯的使用權限集合的資訊。 強烈建議您使用[程式碼存取安全性原則工具 (Caspol.exe)](../../../docs/framework/tools/caspol-exe-code-access-security-policy-tool.md) 修改安全性原則，確保原則變更不會造成安全性組態檔損毀。  
  
> [!NOTE]
>  從 [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] 開始，安全性組態檔只有在安全性原則已變更時才會出現。  
  
 安全性組態檔位於下列位置：  
  
-   企業原則組態檔：%*runtime-install-path*%\Config\Enterprisesec.config  
  
-   電腦原則組態檔：%*runtime-install-path*%\Config\Security.config  
  
-   使用者原則組態檔：%USERPROFILE%\Application data\Microsoft\CLR security config\v*xx.xx*\Security.config  
  
## <a name="in-this-section"></a>本節內容  
 [如何：使用 DEVPATH 找出組件](../../../docs/framework/configure-apps/how-to-locate-assemblies-by-using-devpath.md)  
 說明如何在搜尋組件時指示執行階段使用 DEVPATH 環境變數。  
  
 [重新導向組件版本](../../../docs/framework/configure-apps/redirect-assembly-versions.md)  
 說明如何指定組件的位置和應使用組件的哪個版本。  
  
 [指定組件的位置](../../../docs/framework/configure-apps/specify-assembly-location.md)  
 說明如何指定執行階段應該在什麼地方搜尋組件。  
  
 [設定密碼編譯類別](../../../docs/framework/configure-apps/configure-cryptography-classes.md)  
 說明如何將演算法名稱對應到加密類別，物件識別項對應到加密演算法。  
  
 [如何：建立發行者原則](../../../docs/framework/configure-apps/how-to-create-a-publisher-policy.md)  
 說明您何時應該以何種方式新增發行者原則檔，以指定組件重新導向和程式碼基底設定。  
  
 [組態檔結構描述](../../../docs/framework/configure-apps/file-schema/index.md)  
 說明啟動、執行階段、網路和其他類型組態設定的結構描述階層架構。  
  
## <a name="see-also"></a>請參閱  
 [組態檔結構描述](../../../docs/framework/configure-apps/file-schema/index.md)  
 [指定組件的位置](../../../docs/framework/configure-apps/specify-assembly-location.md)  
 [重新導向組件版本](../../../docs/framework/configure-apps/redirect-assembly-versions.md)  
 [註冊遠端物件使用組態檔](http://msdn.microsoft.com/library/bc503ee1-c811-4f82-9525-470343326adc)  
 [ASP.NET 網站管理](http://msdn.microsoft.com/library/1298034b-5f7d-464d-abd1-ad9e6b3eeb7e)  
 [NIB： 安全性原則管理](http://msdn.microsoft.com/library/d754e05d-29dc-4d3a-a2c2-95eaaf1b82b9)  
 [Caspol.exe (程式碼存取安全性原則工具)](../../../docs/framework/tools/caspol-exe-code-access-security-policy-tool.md)  
 [Common Language Runtime 中的組件](../../../docs/framework/app-domains/assemblies-in-the-common-language-runtime.md)  
 [遠端物件](http://msdn.microsoft.com/library/515686e6-0a8d-42f7-8188-73abede57c58)
